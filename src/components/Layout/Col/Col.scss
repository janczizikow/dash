@import '../../../shared.scss';

.col {
  flex: 1 0 0;
  max-width: 100%;
}

@mixin make-col($size, $columns: $grid-columns) {
  flex: 0 0 percentage($size / $columns);
  max-width: percentage($size / $columns);
}

@mixin make-offset($size, $columns: $grid-columns) {
  margin-left: percentage($size / $columns);
}

// FIXME: Offsets!!! => should start with 0 to reset offset from other breakpoints
//                   => should
// TODO: Order classes => check if need to add more
@each $breakpoint, $value in $grid-breakpoints {
  $prefix: $breakpoint;

  @if $value > 0 {
    @for $i from 1 through $grid-columns {
      @include media($value) {
        .col-#{$prefix}-#{$i} {
          @include make-col($i, $grid-columns);
        }

        .col-#{$prefix}-offset-#{$i - 1} {
          @include make-offset($i - 1, $grid-columns);
        }
      }
    }

    @include media($value) {
      @for $j from 0 through $grid-columns {
        .col-#{$prefix}-order-#{$j} {
          order: $j;
        }
      }
    }
  } @else {
    @for $i from 1 through $grid-columns {
      .col-#{$prefix}-#{$i} {
        @include make-col($i, $grid-columns);
      }
    }

    @for $i from 0 through ($grid-columns - 1) {
      .col-#{$prefix}-offset-#{$i} {
        @include make-offset($i, $grid-columns);
      }
    }
  }
}
